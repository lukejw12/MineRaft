execute if block ~ ~ ~ chest align y run tp @s ~ ~1 ~
execute at @s if block ~ ~-1 ~ #minecraft:valid_center_blocks unless block ~ ~-1 ~ chest positioned ~ ~-1 ~ if entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run tag @s add valid
execute at @s if block ~ ~-1 ~ #minecraft:valid_center_blocks unless block ~ ~-1 ~ chest positioned ~ ~-1 ~ if entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run playsound block.netherite_block.place block @a[distance=..10] ~ ~ ~ 100 0 1
execute at @s if block ~ ~-1 ~ #minecraft:valid_center_blocks unless block ~ ~-1 ~ chest positioned ~ ~-1 ~ if entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run item modify entity @e[type=item_display,distance=..1,limit=1,sort=nearest] contents {function:"set_components",components:{"minecraft:item_model":"minecraft:foundation_armor_foundation"}}
execute at @s if block ~ ~-1 ~ #minecraft:valid_center_blocks unless block ~ ~-1 ~ chest positioned ~ ~-1 ~ if entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run tag @e[type=marker,distance=..1,limit=1,tag=valid_shark_chomp] add armored
execute at @s if block ~ ~-1 ~ #minecraft:valid_center_blocks unless block ~ ~-1 ~ chest positioned ~ ~-1 ~ if entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run tag @e[type=marker,distance=..1,limit=1,tag=valid_shark_chomp] remove valid_shark_chomp

execute at @s if block ~ ~-1 ~ #minecraft:valid_center_blocks if block ~ ~-1 ~ chest positioned ~ ~-1 ~ if entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run playsound block.netherite_block.place block @a[distance=..10] ~ ~ ~ 100 0 1
execute at @s if block ~ ~-1 ~ #minecraft:valid_center_blocks if block ~ ~-1 ~ chest positioned ~ ~-1 ~ if entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run tag @s add valid
execute at @s if block ~ ~-1 ~ #minecraft:valid_center_blocks if block ~ ~-1 ~ chest positioned ~ ~-1 ~ if entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run data modify entity @e[type=item_display,distance=..1,limit=1,sort=nearest] Rotation set value [-90f,0f]
execute at @s if block ~ ~-1 ~ #minecraft:valid_center_blocks if block ~ ~-1 ~ chest positioned ~ ~-1 ~ if entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run item modify entity @e[type=item_display,distance=..1,limit=1,sort=nearest] contents {function:"set_components",components:{"minecraft:item_model":"minecraft:foundation_armor_collection_net"}}
execute at @s if block ~ ~-1 ~ #minecraft:valid_center_blocks if block ~ ~-1 ~ chest positioned ~ ~-1 ~ if entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run tag @e[type=marker,distance=..1,limit=1,tag=valid_shark_chomp] add armored
execute at @s if block ~ ~-1 ~ #minecraft:valid_center_blocks if block ~ ~-1 ~ chest positioned ~ ~-1 ~ if entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run tag @e[type=marker,distance=..1,limit=1,tag=valid_shark_chomp] remove valid_shark_chomp

execute unless entity @s[tag=valid] positioned ~ ~-1 ~ if entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run summon item ~ ~ ~ {Motion:[0.0,0.3,0.0],Item:{id:"minecraft:vex_spawn_egg",count:1,components:{"minecraft:custom_data":{foundation_item:1b},"minecraft:entity_data":{id:"minecraft:marker",Tags:["foundation_armor"]},"minecraft:item_model":"minecraft:foundation_armor_item","minecraft:item_name":"Foundation Armor","minecraft:rarity":"uncommon"}}}
execute unless entity @s[tag=valid] positioned ~ ~-1 ~ if entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run playsound minecraft:block.anvil.place block @a ~ ~ ~ 2 2
execute unless entity @s[tag=valid] positioned ~ ~-1 ~ if entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run kill @s
execute unless entity @s[tag=valid] positioned ~ ~-1 ~ if entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run return 0

execute unless entity @s[tag=valid] positioned ~ ~-1 ~ unless entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run summon item ~ ~ ~ {Motion:[0.0,0.3,0.0],Item:{id:"minecraft:vex_spawn_egg",count:1,components:{"minecraft:custom_data":{foundation_item:1b},"minecraft:entity_data":{id:"minecraft:marker",Tags:["foundation_armor"]},"minecraft:item_model":"minecraft:foundation_armor_item","minecraft:item_name":"Foundation Armor","minecraft:rarity":"uncommon"}}}
execute unless entity @s[tag=valid] positioned ~ ~-1 ~ unless entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run playsound minecraft:block.anvil.place block @a ~ ~ ~ 2 2
execute unless entity @s[tag=valid] positioned ~ ~-1 ~ unless entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run kill @s
execute unless entity @s[tag=valid] positioned ~ ~-1 ~ unless entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run return 0

execute positioned ~ ~-1 ~ unless entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run summon item ~ ~ ~ {Motion:[0.0,0.3,0.0],Item:{id:"minecraft:vex_spawn_egg",count:1,components:{"minecraft:custom_data":{foundation_item:1b},"minecraft:entity_data":{id:"minecraft:marker",Tags:["foundation_armor"]},"minecraft:item_model":"minecraft:foundation_armor_item","minecraft:item_name":"Foundation Armor","minecraft:rarity":"uncommon"}}}
execute positioned ~ ~-1 ~ unless entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run playsound minecraft:block.anvil.place block @a ~ ~ ~ 2 2
execute positioned ~ ~-1 ~ unless entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run kill @s
execute positioned ~ ~-1 ~ unless entity @e[tag=armored,distance=..1,limit=1,sort=nearest] unless entity @e[tag=valid_shark_chomp,distance=..1,limit=1,sort=nearest] run return 0

kill @s